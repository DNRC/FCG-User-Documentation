# Number Management

The DNRC areas, DNRC units and activity roles that are available
to be associated with financial codes can change on a yearly basis.
Before these settings can be applied, they must be manually approved
by a user with the Owner role. Once the settings for a year are
approved, they are made read-only and cannot be modified.

These settings are available in the configuration page, which can be
navigated to by using the `Configuration` link in the navigation header.

The page is separated into tabs, with one tab for each of the possible
configurable entities. When the page is first opened, it shows the
current year's configuration if it has been approved, with the option
to view previous years' configurations. To actually edit approve the
next year's configuration, a link on the upper right corner of the
page will lead you to the configuration page.

## Configuring Activity Roles

### Number Templates

Number templates are used to specify how the numbers associated with
an activity role are generated. Each template is a series of
placeholder characters that determine what the character in the same
place of the generated numbered will be. These placeholders can be
resolved to the character itself, a digit of the current year, or a
digit from the activity role's counter.

Use the table below to
see which characters in a template are transformed when a number is
generated:

| Character | Description |
|-----------|-------------|
| X         | Replaced by a digit from the activity role's counter |
| O         | Replaced by a digit from the activity role's counter if there aren't enough `X` placeholders |
| Y         | Replaced by a digit from the code's year |

Characters are replaced right-to-left starting with the counter's or year's least
significant digit. Any placeholder that doesn't have a digit assigned
to it will be set to `0`. For example, for the template `XXX`, with a
counter value of `25`, the generated value is `025`.

Placeholders do not need to be contiguous. For example, for the
template `X1X` with a counter value of `36`, the generated value will
be `316`.

For the placeholders `X` and `O`, if there are too many digits in the
counter to encode, no result will be produced.

For the placeholder `Y`, the year is truncated to match the number of
`Y` placeholders given. For example, with the template `YY`, and the
year 2021, the generated value will be `21`.

#### The `O` Placeholder

Unlike the `X` placeholder, the `O` placeholder doesn't directly
place it's digits into the generated string. Instead, the digits are
transformed into a base 27 number which is encoded using the
digits `0`, `a`, `b`, `c`, `d`, ... `z`. This number is then placed
into the template as usual.

For example, if the template `O` needed to encode the number `11`, it
would use the character `k`, as it is the 11th letter of the
alphabet. As another example, the template `OO` encodes the number 28
as `a0` and the number 30 as `ac`.

## Configuring DNRC Areas and Units

Areas and units are managed using identical interfaces.

### Adding Areas or Units

To add an area or unit, find the appropriate list and click on the
plus icon underneath the list's title. Two input fields will appear to enter
the new item's name and three letter abbreviation.

If the new item is added successfully, then the new item will be displayed
at the top of the list. Otherwise, an error message will appear. Item's names
and abbreviations must be unique within their group.

### Disabling Areas or Units

To disable an item, find it in the appropriate list. Underneath the item's
general information, there is a checkbox labeled `disable`. Toggling
the checkbox will enable or disabled the area or unit for inclusion in
the next year's configuration.

## Configuring Preseason Admin Codes

The application can store and display static codes that aren't
generated by the main code generation functionality. These codes can
be entered under the Preseason Admin tab.

To add a preseason code, click on the add button and enter the code's
name, category, and numeric code.

To add a new category, contact the system administrators with the
following information:

+ The name of the category
+ Any descriptive text that should go along with it (limited to 300
  characters).

The descriptions of each category must also be changed by the system
administrators.
